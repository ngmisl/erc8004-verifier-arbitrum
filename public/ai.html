<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ERC-8004 Agent Instructions</title>
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<style>
  :root {
    --bg: #0a0a0a;
    --surface: #141414;
    --border: #222;
    --text: #f5f5f5;
    --muted: #999;
    --green: #22c55e;
    --blue: #3b82f6;
    --mono: 'JetBrains Mono', 'Fira Code', 'SF Mono', monospace;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: var(--mono);
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 2rem 1rem;
  }
  .container {
    width: 100%;
    max-width: 720px;
  }
  h1 {
    font-size: 1.1rem;
    font-weight: 500;
    letter-spacing: 0.05em;
    color: var(--muted);
    margin-bottom: 0.25rem;
  }
  .subtitle {
    font-size: 0.75rem;
    color: var(--muted);
    margin-bottom: 2rem;
    opacity: 0.6;
  }
  h2 {
    font-size: 0.85rem;
    font-weight: 500;
    color: var(--blue);
    margin-top: 2rem;
    margin-bottom: 0.75rem;
    letter-spacing: 0.03em;
  }
  p, li {
    font-size: 0.75rem;
    color: var(--muted);
    line-height: 1.7;
  }
  p { margin-bottom: 0.75rem; }
  ul {
    margin-bottom: 0.75rem;
    padding-left: 1.25rem;
  }
  li { margin-bottom: 0.3rem; }
  pre {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 0.75rem 1rem;
    font-size: 0.7rem;
    color: var(--text);
    line-height: 1.6;
    overflow-x: auto;
    margin-bottom: 1rem;
    white-space: pre-wrap;
  }
  code {
    font-family: var(--mono);
    font-size: 0.7rem;
    color: var(--blue);
  }
  .section {
    padding-bottom: 1.5rem;
    border-bottom: 1px solid var(--border);
  }
  .section:last-of-type {
    border-bottom: none;
  }
  strong { color: var(--text); font-weight: 500; }
  a { color: var(--blue); text-decoration: none; }
  a:hover { text-decoration: underline; }
  .footer {
    margin-top: 3rem;
    font-size: 0.65rem;
    color: var(--muted);
    opacity: 0.4;
    text-align: center;
  }
  .footer a { color: var(--muted); }
</style>
</head>
<body>
<div class="container">
  <h1>ERC-8004 Agent Instructions</h1>
  <p class="subtitle">Machine-readable guide for AI agents implementing content signing</p>

  <div class="section">
    <h2>What is ERC-8004 signing</h2>
    <p>
      ERC-8004 lets an AI agent cryptographically sign content using its on-chain wallet, producing a
      verifiable signature block that anyone can check against the agent's identity on Arbitrum.
    </p>
  </div>

  <div class="section">
    <h2>Tool interface</h2>
    <p>
      The signing tool is called <code>sign_content</code>.
    </p>
    <ul>
      <li><strong>Input:</strong> Raw content text only. No labels, no commentary, no formatting, no preamble. Strip everything that is not the actual message text before passing it.</li>
      <li><strong>Output:</strong> A copy-paste ready block containing the original content followed by a compact signature footer.</li>
    </ul>
  </div>

  <div class="section">
    <h2>Output format</h2>
    <p>The tool returns a string in exactly this structure:</p>
<pre>[content]

---
Signed by [AgentName] ([fullId])
sig: 0x...
hash: 0x...
ts: [ISO 8601 timestamp]
Verify: [URL]</pre>
    <p>Example:</p>
<pre>Hello, this is a signed message.

---
Signed by Keystone (eip155:42161:0x8004...a432:5)
sig: 0xf13bd8a9...
hash: 0x57caa12b...
ts: 2026-02-06T14:32:15.000Z
Verify: https://erc8004.orbiter.website/#eyJzIjoiMHg...</pre>
    <p>
      The <code>fullId</code> follows the format <code>eip155:[chainId]:[registryAddress]:[agentId]</code>.
    </p>
  </div>

  <div class="section">
    <h2>Display rules</h2>
    <ul>
      <li>Present the entire output as a single code block.</li>
      <li>Do not add any preamble, commentary, or explanation before or after the signed block.</li>
      <li>Do not modify, reformat, or truncate any part of the signature footer.</li>
      <li>The verify link must remain intact and clickable.</li>
    </ul>
  </div>

  <div class="section">
    <h2>Verification URL format</h2>
    <p>
      The verify URL is <code>https://erc8004.orbiter.website/#[base64]</code> where the
      fragment is a base64-encoded JSON object with these fields:
    </p>
<pre>{
  "s": "0x...",   // signature
  "h": "0x...",   // content hash
  "a": "eip155:42161:0x...:5",  // agent full ID
  "n": "Keystone",              // agent name
  "t": "2026-02-06T14:32:15.000Z",  // timestamp (ISO 8601)
  "d": "First line of content"       // subject (first line, max 80 chars)
}</pre>
    <p>
      The <code>d</code> field is the first line of the signed content, truncated to 80 characters
      (cut at 77 + "..." if longer).
    </p>
  </div>

  <div class="section">
    <h2>How verification works</h2>
    <ul>
      <li>The content hash binds both the content and timestamp: <code>keccak256(abi.encode(keccak256(content), timestamp))</code>.</li>
      <li>The verifier recovers the signer address from the ECDSA signature (EIP-191 personal sign over the content hash).</li>
      <li>It then checks the recovered address against the agent's registered wallet on the Arbitrum identity registry.</li>
      <li>Everything runs client-side in the browser. No data is sent to any server.</li>
    </ul>
  </div>

  <div class="footer">
    <a href="/">Verify signatures</a>
    &middot; <a href="https://eips.ethereum.org/EIPS/eip-8004" target="_blank">ERC-8004</a>
    &middot; Verification runs entirely in your browser against Arbitrum
  </div>
</div>
</body>
</html>
