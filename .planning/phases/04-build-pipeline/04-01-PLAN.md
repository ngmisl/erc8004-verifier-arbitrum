---
phase: 04-build-pipeline
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - public/index.html
  - public/ai.html
autonomous: true
requirements:
  - BUILD-01
  - BUILD-02
  - BUILD-03
  - BUILD-04

must_haves:
  truths:
    - "Running `bun run build` produces dist/ containing ERC8004-SKILL.md but not ai.html"
    - "index.html has a visible 'For Agents' box with the URL https://erc8004.orbiter.website/ERC8004-SKILL.md"
    - "ai.html does not exist in public/ or dist/"
    - "No remaining references to ai.html exist in any project file"
  artifacts:
    - path: "package.json"
      provides: "Updated dist script copying ERC8004-SKILL.md instead of ai.html"
      contains: "public/ERC8004-SKILL.md"
    - path: "public/index.html"
      provides: "For Agents box with skill doc fetch URL, footer link to ai.html removed"
      contains: "https://erc8004.orbiter.website/ERC8004-SKILL.md"
  key_links:
    - from: "package.json"
      to: "public/ERC8004-SKILL.md"
      via: "dist script cp command"
      pattern: "cp public/index\\.html public/ERC8004-SKILL\\.md"
    - from: "public/index.html"
      to: "https://erc8004.orbiter.website/ERC8004-SKILL.md"
      via: "For Agents box code element"
      pattern: "erc8004\\.orbiter\\.website/ERC8004-SKILL\\.md"
---

<objective>
Wire ERC8004-SKILL.md into the build pipeline, add a visible "For Agents" discovery box to index.html, and remove ai.html from the project.

Purpose: Complete the transition from ai.html to ERC8004-SKILL.md so agents can discover and fetch the skill document from the canonical URL.
Output: Updated package.json dist script, updated index.html with "For Agents" box, ai.html deleted.
</objective>

<execution_context>
@/home/teresa/.claude/get-shit-done/workflows/execute-plan.md
@/home/teresa/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-build-pipeline/04-RESEARCH.md
@package.json
@public/index.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update dist script and add "For Agents" box to index.html</name>
  <files>package.json, public/index.html</files>
  <action>
Two changes in two files:

**package.json** — In the `"dist"` script, replace `public/ai.html` with `public/ERC8004-SKILL.md`. The full dist script should become:
```
"dist": "rm -rf dist && mkdir -p dist/js && cp public/index.html public/ERC8004-SKILL.md public/favicon.svg dist/ && cp public/js/main.js dist/js/"
```
No other scripts change.

**public/index.html** — Two edits:

(A) Insert a "For Agents" box immediately before the `<div class="footer">` element (around line 389). Use the existing `.wizard`, `.steps`, `.step`, `.step-num`, `.step-content`, `.step-title`, `.step-desc` CSS classes — no new styles needed. The box HTML:
```html
  <div class="wizard" style="margin-top: 1.5rem;">
    <h2>For Agents</h2>
    <div class="steps">
      <div class="step">
        <div class="step-num" style="background: rgba(34,197,94,0.12); color: var(--green);">A</div>
        <div class="step-content">
          <div class="step-title">Skill document</div>
          <div class="step-desc">
            Fetch <code>https://erc8004.orbiter.website/ERC8004-SKILL.md</code> to learn
            how to sign and verify ERC-8004 content using only JSON-RPC web fetch calls.
          </div>
        </div>
      </div>
    </div>
  </div>
```

(B) In the `<div class="footer">` section, remove the `&middot; <a href="/ai.html">For Agents</a>` line entirely. The "For Agents" box above replaces it. The footer should read:
```html
  <div class="footer">
    <a href="https://eips.ethereum.org/EIPS/eip-8004" target="_blank">ERC-8004</a>
    &middot; Verification runs entirely in your browser against Arbitrum
    <br/>Made with ... by <a href="https://meta.orbiter.website" target="_blank">Chris</a>
  </div>
```
(Keep the heart emoji exactly as it exists in the original.)

URL is `https://erc8004.orbiter.website/ERC8004-SKILL.md` per research — all project evidence points to orbiter.website as the canonical host.
  </action>
  <verify>
Run: `grep 'ERC8004-SKILL.md' package.json` — should show the updated dist script line.
Run: `grep 'ai.html' package.json` — should return no matches.
Run: `grep 'erc8004.orbiter.website/ERC8004-SKILL.md' public/index.html` — should return the code element in the For Agents box.
Run: `grep 'ai.html' public/index.html` — should return no matches.
  </verify>
  <done>package.json dist script copies ERC8004-SKILL.md (not ai.html). index.html has a visible "For Agents" section with the correct fetch URL. No references to ai.html remain in either file.</done>
</task>

<task type="auto">
  <name>Task 2: Delete ai.html and verify build</name>
  <files>public/ai.html</files>
  <action>
Delete `public/ai.html` from the project.

Then run `bun run build` to confirm the full pipeline works end-to-end:
- shadow-cljs compiles ClojureScript to public/js/main.js
- dist script copies index.html, ERC8004-SKILL.md, favicon.svg to dist/
- dist/js/main.js is copied

After build completes, verify:
1. `ls dist/` shows: index.html, ERC8004-SKILL.md, favicon.svg, js/
2. `ls dist/` does NOT show ai.html
3. `public/ai.html` does not exist

If shadow-cljs compilation fails or is unavailable, run only `bun run dist` (the file copy step) since the ClojureScript source is not changing in this phase. The dist step is what matters for BUILD-02 verification.
  </action>
  <verify>
Run: `test ! -f public/ai.html && echo "DELETED" || echo "STILL EXISTS"` — should print DELETED.
Run: `bun run dist` — should complete without errors.
Run: `ls dist/` — should show index.html, ERC8004-SKILL.md, favicon.svg, js/ (no ai.html).
Run: `grep -r 'ai.html' public/ package.json` — should return no matches.
  </verify>
  <done>ai.html is deleted from public/. `bun run dist` succeeds. dist/ contains ERC8004-SKILL.md and does not contain ai.html. No references to ai.html remain in the project.</done>
</task>

</tasks>

<verification>
All four BUILD requirements verified:
- BUILD-01: ERC8004-SKILL.md is in public/ (already was), ai.html is gone from public/
- BUILD-02: dist script copies ERC8004-SKILL.md, not ai.html
- BUILD-03: index.html has a visible "For Agents" box with the canonical fetch URL
- BUILD-04: ai.html does not exist anywhere in the project

Phase success criteria:
1. `bun run build` (or `bun run dist`) copies ERC8004-SKILL.md to dist/ — verified by ls dist/
2. "For Agents" box is visible in index.html with working fetch URL — verified by grep
3. ai.html no longer exists in public/ or dist/ — verified by test and ls
4. Agent fetching the URL receives markdown content (static hosting serves .md as raw text) — verified by file existence
</verification>

<success_criteria>
- `bun run dist` completes without errors
- `dist/` contains ERC8004-SKILL.md but not ai.html
- `public/index.html` contains the "For Agents" box with `https://erc8004.orbiter.website/ERC8004-SKILL.md`
- `public/ai.html` does not exist
- `grep -r 'ai.html' public/ package.json` returns no matches
</success_criteria>

<output>
After completion, create `.planning/phases/04-build-pipeline/04-01-SUMMARY.md`
</output>
